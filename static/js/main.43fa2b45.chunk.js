(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{447:function(e,t,a){e.exports=a(897)},452:function(e,t,a){},453:function(e,t,a){e.exports=a.p+"static/media/logo.25bf045c.svg"},454:function(e,t,a){},897:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(31),i=a.n(s),o=(a(452),a(18)),c=a(20),l=a(24),u=a(25),p=a(26),h=(a(453),a(454),a(38)),m=a(15),d=a.n(m),f=a(27),g=a(915),v=a(906),b=a(438),y=a(910),E=a(898),w=a(907),D=a(917),k=a(909),j=a(919),O=a(914),S=(a(292),a(913)),I=a(79),x=a(918),F=a(911),C=a(131),T=a(205),M=a.n(T),R=(a(357),Object(C.b)(M.a)),U=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleSelect=function(e){var t=e.start,n=e.end;console.log(t),console.log(n);var r=document.getElementById("startDateField"),s=t.getDate();s<10&&(s="0"+s);var i=t.getMonth()+1;i<10&&(i="0"+i);var o=n.getDate();o<10&&(o="0"+o);var c=n.getMonth()+1;c<10&&(c="0"+c),r.value=t.getFullYear()+"-"+i+"-"+s,console.log(r.value),a.props.rentDetail.setState({startDate:r.value});var l=document.getElementById("endDateField");l.value=n.getFullYear()+"-"+c+"-"+o,console.log(l.value),a.props.rentDetail.setState({endDate:l.value})};var n=new Date,r=new Date;n.setDate(27),n.setMonth(10),n.setFullYear(2019),r.setDate(20),r.setMonth(10),r.setFullYear(2019),a.itemEvents=[],a.bookingString=a.props.item.booking,a.bookings=a.bookingString.split("||");for(var s=1;s<a.bookings.length;s++){var i=a.bookings[s].substring(a.bookings[s].indexOf("(")),c=i.substring(1,i.indexOf(",")),p=i.substring(i.indexOf(",")+1,i.indexOf(")")),h=c.split("-"),m=p.split("-"),d=new Date,f=new Date;d.setDate(Number(m[2])),d.setMonth(Number(m[1])-1),d.setFullYear(Number(m[0])),f.setDate(Number(h[2])),f.setMonth(Number(h[1])-1),f.setFullYear(Number(h[0])),a.itemEvents.push({allDay:!0,end:d,start:f,title:"Booked"})}return a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(C.a,{views:["month"],selectable:!0,localizer:R,events:this.itemEvents,startAccessor:"start",endAccessor:"end",style:{height:500},onSelectSlot:this.handleSelect}))}}]),t}(r.a.Component),P=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={modelOpen:!1,messageOpen:!1,itemCalendarShown:!1},a.ownsItem=a.props.application.state.user===a.props.item.userID,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"deleteItem",value:function(e){fetch("https://borrow-java.herokuapp.com/items/"+e+"/",{method:"DELETE"})}},{key:"render",value:function(){var e=this;return r.a.createElement(S.a,null,r.a.createElement(b.a,{src:"data:image/jpeg;base64,".concat(this.props.item.img),wrapped:!0,ui:!1}),r.a.createElement(S.a.Content,null,r.a.createElement(S.a.Header,null," ",this.props.item.name),r.a.createElement(S.a.Description,null,r.a.createElement("strong",null,"Description: "),this.props.item.description," "),r.a.createElement(S.a.Description,null,r.a.createElement("strong",null,"Daily Rate: "),"$",this.props.item.dailyRate),r.a.createElement(S.a.Description,null,r.a.createElement("strong",null,"Replace Fee: "),"$",this.props.item.replaceFee),r.a.createElement(S.a.Description,null,r.a.createElement("strong",null,"Tags: "),this.props.item.tags)),r.a.createElement(S.a.Content,{extra:!0},r.a.createElement("div",{className:"ui two buttons"},r.a.createElement(y.a,{open:this.state.itemCalendarShown,trigger:r.a.createElement(E.a,{style:{display:this.ownsItem?"inline":"none"},basic:!0,color:"blue",onClick:function(){e.setState({itemCalendarShown:!0})}},"Calendar")},r.a.createElement(v.a,null,r.a.createElement(B,{closeModal:function(){e.setState({itemCalendarShown:!1})},application:this.props.application,item:this.props.item,user1:this.props.application.state.user}))),r.a.createElement(y.a,{open:this.state.modalOpen,trigger:r.a.createElement(E.a,{style:{display:this.ownsItem?"none":"inline"},basic:!0,color:"green",onClick:function(){e.setState({modalOpen:!0})}},"Rent")},r.a.createElement(v.a,null,r.a.createElement(N,{closeModal:function(){e.setState({modalOpen:!1})},application:this.props.application,user2:this.props.item.userID,user1:this.props.application.state.user,item:this.props.item,dailyRate:this.props.item.dailyRate}))),r.a.createElement(E.a,{style:{display:this.ownsItem?"inline":"none"},basic:!0,color:"red",onClick:function(){e.deleteItem(e.props.item.itemID)}},"Delete"),r.a.createElement(y.a,{open:this.state.messageOpen,trigger:r.a.createElement(E.a,{style:{display:this.ownsItem?"none":"inline"},basic:!0,color:"red",onClick:function(){e.setState({messageOpen:!0})}},"Send Message")},r.a.createElement(v.a,null,r.a.createElement(A,{closeModal:function(){e.setState({messageOpen:!1})},application:this.props.application,user2:this.props.item.userID,user1:this.props.application.state.user,item:this.props.item}))))),r.a.createElement(S.a.Content,{extra:!0},r.a.createElement("a",{onClick:function(){e.props.application.setState({account:!0,accountid:e.props.item.userID})}},r.a.createElement(I.a,{name:"user"}),this.props.item.userID)))}}]),t}(r.a.Component),B=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={messgaes:"",chatID:0,userRentee:"",startDate:"",endDate:""},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"getChat",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t,a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://borrow-java.herokuapp.com/chat/user/"+this.props.user1+"/"+this.state.userRentee+"/").then((function(e){return e.json().then((function(e){a.setState({messages:e.messages,chatID:e.chatID})}))}));case 3:e.next=13;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0),(t=new FormData).append("user1ID",this.props.user1),t.append("user2ID",this.state.userRentee),fetch("https://borrow-java.herokuapp.com/chat/",{method:"POST",body:t}),window.setTimeout((function(){}),2e3);case 13:return e.prev=13,window.setTimeout((function(){a.getChat()}),200),e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[0,5,13,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"addBooking",value:function(){var e=new FormData;e.append("booking","||"+this.state.userRentee+":("+this.state.startDate+","+this.state.endDate+")"),fetch("https://borrow-java.herokuapp.com/items/"+this.props.item.itemID+"/",{method:"PUT",body:e})}},{key:"sendMessage",value:function(){if(0!==this.state.chatID){var e=new FormData;e.append("message","||"+this.props.user1+": I have confirmed your schedule to rent "+this.props.item.name+" from "+this.state.startDate+" to "+this.state.endDate+" if this is a mistake please message me ASAP"),e.append("senderID",this.props.user1),fetch("https://borrow-java.herokuapp.com/chat/"+this.state.chatID+"/",{method:"PUT",body:e}),this.props.closeModal()}}},{key:"handleRequest",value:function(){var e=this;""!==this.state.startDate&&""!==this.state.endDate&&this.getChat().then((function(){e.addBooking(),e.sendMessage()}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(v.a,{style:{marginTop:"5%",marginBottom:"5%"},text:!0},r.a.createElement(j.a,{as:"h2"},"Item Schedule"),r.a.createElement(U,{rentDetail:this,item:this.props.item}),r.a.createElement(k.a,null,r.a.createElement(k.a.Field,null,r.a.createElement("label",null,"Start Date"),r.a.createElement("input",{readOnly:!0,required:!0,type:"date",name:"startDate",id:"startDateField",onChange:function(){e.setState({startDate:document.getElementById("startDateField").value})}})),r.a.createElement(k.a.Field,null,r.a.createElement("label",null,"End Date"),r.a.createElement("input",{readOnly:!0,required:!0,type:"date",name:"endDate",id:"endDateField",onChange:function(){e.setState({endDate:document.getElementById("endDateField").value})}}),r.a.createElement("label",null,"Requesting User"),r.a.createElement("input",{type:"text",name:"user",id:"nameField",onChange:function(){e.setState({userRentee:document.getElementById("nameField").value})}}))),r.a.createElement(E.a,{onClick:this.props.closeModal},"Cancel"),r.a.createElement(E.a,{onClick:function(){e.handleRequest()}},"Add Reservation")))}}]),t}(r.a.Component),N=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={messages:"",chatID:0,validDates:null,startDate:"",endDate:""},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getChat()}},{key:"getChat",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t,a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://borrow-java.herokuapp.com/chat/user/"+this.props.user1+"/"+this.props.user2+"/").then((function(e){return e.json().then((function(e){a.setState({messages:e.messages,chatID:e.chatID})}))}));case 3:e.next=13;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0),(t=new FormData).append("user1ID",this.props.user1),t.append("user2ID",this.props.user2),fetch("https://borrow-java.herokuapp.com/chat/",{method:"POST",body:t}),window.setTimeout((function(){}),2e3);case 13:return e.prev=13,window.setTimeout((function(){a.getChat()}),200),e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[0,5,13,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"sendMessage",value:function(){var e=new FormData;e.append("message","||"+this.props.user1+": I would like to rent "+this.props.item.name+" from "+this.state.startDate+" to "+this.state.endDate+" for $"+this.props.dailyRate*this.getDaysBetween(this.state.startDate,this.state.endDate)+" ID="+this.props.item.itemID),e.append("senderID",this.props.user1),fetch("https://borrow-java.herokuapp.com/chat/"+this.state.chatID+"/",{method:"PUT",body:e}),this.props.closeModal()}},{key:"handleRequest",value:function(){""===this.state.startDate||""===this.state.endDate?this.setState({validDates:!1}):(this.setState({validDates:!0}),this.sendMessage())}},{key:"getDaysBetween",value:function(e,t){if(""===this.state.startDate||""===this.state.endDate)return 0;console.log(e);var a=e.split("-"),n=t.split("-");console.log("START"),console.log(a),console.log("END"),console.log(n);var r=0;if(r+=365*(n[0]-a[0]),r+=31*(n[1]-a[1]),(r+=n[2]-a[2])<0)return 0;for(var s=[],i=a[1];i<n[1];i++)s.push(i);return s.includes(2)&&(r-=3),s.includes(4)&&(r-=1),s.includes(6)&&(r-=1),s.includes(9)&&(r-=1),s.includes(11)&&(r-=1),r}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(v.a,{style:{marginTop:"5%",marginBottom:"5%"},text:!0},r.a.createElement(j.a,{as:"h2"},"Request to Rent"),r.a.createElement(U,{rentDetail:this,item:this.props.item}),r.a.createElement("p",null,"Total Cost: $",this.props.dailyRate*this.getDaysBetween(this.state.startDate,this.state.endDate)),r.a.createElement(k.a,{success:null!=this.state.validDates&&this.state.validDates,error:null!=this.state.validDates&&!this.state.validDates},r.a.createElement(k.a.Field,null,r.a.createElement("label",null,"Start Date"),r.a.createElement("input",{readOnly:!0,required:!0,type:"date",name:"startDate",id:"startDateField",onChange:function(){e.setState({startDate:document.getElementById("startDateField").value})}})),r.a.createElement(k.a.Field,null,r.a.createElement("label",null,"End Date"),r.a.createElement("input",{readOnly:!0,required:!0,type:"date",name:"endDate",id:"endDateField",onChange:function(){e.setState({endDate:document.getElementById("endDateField").value})}})),r.a.createElement("hr",null),r.a.createElement(O.a,{success:!0,header:"Rental message sent.",content:"A message has been sent to the renter"}),r.a.createElement(O.a,{error:!0,header:"Rental message failed.",content:"Please select valid start and end dates."}),r.a.createElement("p",null,"Total Cost: $",this.props.dailyRate*this.getDaysBetween(this.state.startDate,this.state.endDate)),r.a.createElement(E.a,{onClick:function(){e.handleRequest()}},"Request to Rent"),r.a.createElement(E.a,{onClick:this.props.closeModal},"Cancel"))))}}]),t}(r.a.Component),A=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={messages:"",chatID:0},a.userMessage="",a.win=null,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"updateRead",value:function(){var e=new FormData;e.append("userID",this.props.user1),fetch("https://borrow-java.herokuapp.com/chat/"+this.state.chatID+"/user/",{method:"PUT",body:e})}},{key:"componentDidMount",value:function(){this.getChat()}},{key:"getChat",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t,a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://borrow-java.herokuapp.com/chat/user/"+this.props.user1+"/"+this.props.user2+"/").then((function(e){return e.json().then((function(e){a.setState({messages:e.messages,chatID:e.chatID}),a.updateRead()}))}));case 3:e.next=13;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0),(t=new FormData).append("user1ID",this.props.user1),t.append("user2ID",this.props.user2),fetch("https://borrow-java.herokuapp.com/chat/",{method:"POST",body:t}),window.setTimeout((function(){}),2e3);case 13:return e.prev=13,this.win=window.setTimeout((function(){a.getChat()}),200),e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[0,5,13,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"sendMessage",value:function(e){if(""!==this.userMessage&&"Enter"===e.key){var t=new FormData;t.append("message","||"+this.props.user1+":"+this.userMessage),t.append("senderID",this.props.user1),fetch("https://borrow-java.herokuapp.com/chat/"+this.state.chatID+"/",{method:"PUT",body:t}),document.getElementById("messageField").value="";var a=document.getElementById("msgDiv");null!=a&&(a.scrollTop=a.scrollHeight),this.userMessage=""}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(v.a,{style:{marginTop:"2%",marginBottom:"2%"},text:!0},r.a.createElement(D.a,null,r.a.createElement(D.a.Column,{floated:"left",width:5},r.a.createElement(j.a,{as:"h2"},"Messaging: ",this.props.user2)),r.a.createElement(D.a.Column,{floated:"right",width:1},r.a.createElement(E.a,{circular:!0,className:"left floated",onClick:function(){window.clearTimeout(e.win),e.props.closeModal()}},r.a.createElement(I.a,{name:"close"})))),r.a.createElement(x.a,null,r.a.createElement(L,{user:this.props.user1,messages:this.state.messages,item:this.props.item,chat:this})),r.a.createElement(k.a,null,r.a.createElement(k.a.Field,null,r.a.createElement("input",{type:"text",name:"message",id:"messageField",onKeyPress:function(t){e.sendMessage(t)},onChange:function(){e.userMessage=document.getElementById("messageField").value}})))))}}]),t}(r.a.Component),L=function(e){function t(e){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"getMessages",value:function(){for(var e=this.props.messages.split("||"),t=[],a=0;a<e.length;a++){var n=e[a];if(""!==n){var s=n.indexOf(":"),i=n.substr(0,s);n=n.substr(s+1),a===e.length-1?t.push(r.a.createElement(Q,{user:i,message:n,chat:this.props.chat,currentUser:this.props.user,last:!0,item:this.props.item})):t.push(r.a.createElement(Q,{user:i,message:n,chat:this.props.chat,currentUser:this.props.user,last:!1,item:this.props.item}))}}return t}},{key:"render",value:function(){return r.a.createElement("div",{id:"msgDiv",style:{overflowY:"scroll",height:"50vh"}},this.getMessages())}}]),t}(r.a.Component),Q=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).rentable=!1,a.textAlign="right",a.props.currentUser===a.props.user&&(a.textAlign="left");var n=new RegExp("I would like to rent .* from .* to .* for .* ID=.*");if(a.props.last&&n.test(a.props.message)&&a.props.currentUser!==a.props.user){a.rentable=!0;var r=a.props.message,s=r.indexOf("rent")+5,i=(r=r.substring(s)).indexOf("from");a.itemName=r.substring(0,i);var c=(r=r.substring(i+4)).indexOf("to");a.startDate=r.substring(0,c);var p=(r=r.substring(c+2)).indexOf("for");a.endDate=r.substring(0,p);var h=(r=r.substring(p+5)).indexOf("ID=");a.amount=r.substring(0,h),a.itemID=r.substring(h+3)}return a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handleResponse",value:function(e){var t=this;e?(console.log("hi"),this.addBooking().then((function(){t.sendMessage(e)}))):this.sendMessage(e)}},{key:"addBooking",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("booking","||"+this.props.user+":("+this.startDate+","+this.endDate+")"),e.next=4,fetch("https://borrow-java.herokuapp.com/items/"+this.itemID+"/",{method:"PUT",body:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sendMessage",value:function(e){if(0!==this.props.chat.state.chatID){var t=new FormData;e?t.append("message","||"+this.props.currentUser+": I have confirmed your request to rent "+this.itemName+" from "+this.startDate+" to "+this.endDate+" please make the appropriate payment to my account within the next 24 hours."):t.append("message","||"+this.props.currentUser+": I have denied your request to rent "+this.itemName+" from "+this.startDate+" to "+this.endDate),t.append("senderID",this.props.currentUser),fetch("https://borrow-java.herokuapp.com/chat/"+this.props.chat.state.chatID+"/",{method:"PUT",body:t})}}},{key:"cleanMessage",value:function(e){var t=e.indexOf("ID=");return-1!==t?e.substr(0,t):e}},{key:"render",value:function(){var e=this;return r.a.createElement(F.a,{style:{textAlign:this.textAlign,padding:"2vh"}},r.a.createElement(F.a.Avatar,{src:"https://react.semantic-ui.com/images/avatar/small/matt.jpg"}),r.a.createElement(F.a.Content,null,r.a.createElement(F.a.Author,{as:"a"},this.props.user),r.a.createElement(F.a.Text,null,this.cleanMessage(this.props.message)),r.a.createElement("button",{style:{display:this.rentable?"inline":"none",backgroundColor:"green"},onClick:function(){e.handleResponse(!0)}},"Ok"),r.a.createElement("button",{style:{display:this.rentable?"inline":"none",backgroundColor:"red"},onClick:function(){e.handleResponse(!1)}},"No")))}}]),t}(r.a.Component),q=function e(t,a,n,r,s,i,c,l,u){Object(o.a)(this,e),this.itemID=t,this.description=a,this.name=n,this.userID=r,this.replaceFee=s,this.dailyRate=i,this.tags=c[0].split(", "),this.img=l,this.booking=u},Y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={modalOpen:!1,messages:0,imgPath:"message.png"},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getMessagesFromServer()}},{key:"getMessagesFromServer",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t,a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=0,e.next=3,fetch("https://borrow-java.herokuapp.com/chat/user/"+this.props.user);case 3:return e.next=5,e.sent.json();case 5:e.sent.forEach((function(e){(a.props.user===e.user1&&e.lastU1seen<e.lastMessageTime||a.props.user===e.user2&&e.lastU2seen<e.lastMessageTime)&&(t+=1)})),t>0?this.setState({messages:t,imgPath:"messageAlert.png"}):this.setState({messages:t,imgPath:"message.png"}),window.setTimeout((function(){a.getMessagesFromServer()}),200);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(g.a,{widths:6,attached:"top"},r.a.createElement(g.a.Item,{onClick:function(){e.props.application.setState({account:!1,onMessagePage:!1})}},r.a.createElement(v.a,{style:{padding:"1.5% 7.5% 1.5% 7.5%"}},r.a.createElement(b.a,{src:"brw.png",rounded:!0}))),r.a.createElement(g.a.Item,{style:{paddingRight:"15px"}},r.a.createElement(y.a,{open:this.state.modalOpen,trigger:r.a.createElement(E.a,{style:{margin:"2% 10% 2% 10%"},onClick:function(){e.setState({modalOpen:!0})}},r.a.createElement(E.a.Content,null,"Add Item"))},r.a.createElement(v.a,null,r.a.createElement(z,{closeModal:function(){e.setState({modalOpen:!1})},application:this.props.application,navbar:this})))),r.a.createElement(g.a.Item,null,r.a.createElement(v.a,null,r.a.createElement(w.a,{size:"mini",id:"searchQuery",onChange:function(){e.props.application.setState({searchQuery:document.getElementById("searchQuery").value})},icon:{name:"search",circular:!0},placeholder:"Search..."}),r.a.createElement(w.a,{style:{margin:"10px 10px 0px 10px"},type:"number",onChange:function(){e.props.application.setState({maxPrice:document.getElementById("maxPrice").value})},size:"mini",id:"maxPrice",icon:{name:"dollar sign"},placeholder:"Max Price"}))),r.a.createElement(g.a.Item,{style:{paddingLeft:"15px"},onClick:function(){e.props.application.setState({account:!0,accountid:e.props.application.state.user,onMessagePage:!1})}},r.a.createElement(v.a,null,r.a.createElement("span",null,"User: ",this.props.application.state.user))),r.a.createElement(g.a.Item,{onClick:function(){e.props.application.setState({onMessagePage:!0,account:!1,accountid:null})}},r.a.createElement("figure",null,r.a.createElement(b.a,{src:this.state.imgPath}),r.a.createElement("figcaption",null,this.state.messages," unread messages"))),r.a.createElement(g.a.Item,{onClick:function(){e.props.application.setState({signedIn:!1,user:null,accountid:null,account:!1,onMessagePage:!1})}},"Sign Out"))}}]),t}(r.a.Component),W=function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,null,[{key:"getDataFromServer",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Array,e.next=3,fetch(t);case 3:return e.next=5,e.sent.json();case 5:return e.sent.forEach((function(e){a.push(new q(e.itemID,e.description,e.name,e.userID,e.replaceFee,e.dailyRate,e.tags,e.img,e.bookedDates))})),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();W.postDataToServer=function(e){return fetch("https://borrow-java.herokuapp.com/items",{method:"POST",body:e})},W.deleteDataFromServer=function(e){return fetch("https://borrow-java.herokuapp.com/items/".concat(e),{method:"DELETE"})},W.updateDataOnServer=function(e,t){return fetch("https://borrow-java.herokuapp.com/items/".concat(e),{method:"PUT",body:t})};var V=function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,null,[{key:"getDataFromServer",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Array,e.next=3,fetch("https://borrow-java.herokuapp.com/users/");case 3:return e.next=5,e.sent.json();case 5:return e.sent.forEach((function(e){a.push(e.userID)})),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://borrow-java.herokuapp.com/users/".concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n.password);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(f.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("login",t),n.append("password",a),e.next=5,fetch("https://borrow-java.herokuapp.com/users/login",{method:"POST",body:n});case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}();V.postDataToServer=function(e){return fetch("https://borrow-java.herokuapp.com/users",{method:"POST",body:e})},V.deleteDataFromServer=function(e){return fetch("https://borrow-java.herokuapp.com/users/".concat(e),{method:"DELETE"})},V.updateDataOnServer=function(e,t){return fetch("https://borrow-java.herokuapp.com/users/".concat(e),{method:"PUT",body:t})};var _=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).userName="",a.password="",a.state={users:[],signedUp:null,loginFailed:null},a.res=null,a.userPassword="",a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"getDataFromServer",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,V.getDataFromServer();case 3:e.t1=e.sent,e.t2={users:e.t1},e.t0.setState.call(e.t0,e.t2),window.setTimeout((function(){t.getDataFromServer()}),200);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getDataFromServer()}},{key:"getUser",value:function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.getUser(t);case 2:this.userPassword=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loginUser",value:function(){var e=Object(f.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.login(t,a);case 2:this.res=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleLogin",value:function(){var e=this;""===this.password||""===this.userName||this.loginUser(this.userName,this.password).then((function(){200==e.res.status?(e.props.application.setState({signedIn:!0,user:e.userName}),e.setState({signedUp:null}),e.setState({loginFailed:null})):(e.setState({loginFailed:!0}),e.setState({signedUp:null}))}))}},{key:"handleSignUp",value:function(){var e=this;""===this.password||""===this.userName||(this.userName.endsWith("@jhu.edu")||this.userName.endsWith("@jh.edu")?this.getUser(this.userName).then((function(){if(""===e.userPassword){var t=new FormData;t.append("userID",e.userName),t.append("password",e.password),V.postDataToServer(t),e.setState({signedUp:!0,loginFailed:null})}else e.setState({signedUp:!1,loginFailed:null})})):this.setState({signedUp:!1,loginFailed:null}))}},{key:"render",value:function(){var e=this;return r.a.createElement(D.a,{centered:!0,colums:5},r.a.createElement(D.a.Row,{centered:!0,columns:2},r.a.createElement(D.a.Column,null,r.a.createElement(v.a,{textAlign:"left"},r.a.createElement(k.a,{success:null!=this.state.signedUp&&this.state.signedUp,warning:null!=this.state.signedUp&&!this.state.signedUp,error:null!=this.state.loginFailed&&this.state.loginFailed},r.a.createElement(j.a,null,"Email:"),r.a.createElement(k.a.Input,{required:!0,type:"text",name:"username",id:"username",onChange:function(){e.userName=document.getElementById("username").value}}),r.a.createElement(j.a,null,"Password:"),r.a.createElement(k.a.Input,{required:!0,type:"password",name:"password",id:"password",onChange:function(){e.password=document.getElementById("password").value}}),r.a.createElement("hr",null),r.a.createElement(O.a,{success:!0,header:"Sign Up Complete.",content:"You're all signed up."}),r.a.createElement(O.a,{warning:!0,header:"Sign Up Failed.",content:"You entered a non-jhu email, or an email already in use."}),r.a.createElement(O.a,{error:!0,header:"Sign In Failed.",content:"Invalid email or password."}),r.a.createElement(E.a,{onClick:function(){e.handleLogin()}},"Login"),r.a.createElement(E.a,{onClick:function(){e.handleSignUp()}},"Sign up"))))))}}]),t}(r.a.Component),z=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={plusShown:!0,pictures:[]},a.uploadFile=a.uploadFile.bind(Object(h.a)(a)),a.username=a.props.application.state.user,a.description="",a.itemName="",a.replaceFee=-1,a.dailyRate=-1,a.tag="",a.tags=[],a.formData=new FormData,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handleSubmit",value:function(){""==this.description&&""==this.itemName&&""==this.tag&&-1==this.replaceFee&&-1==this.dailyRate||(this.setState({plusShown:!0}),this.props.application.setState({signedIn:!0,user:this.username}),this.tags.push(this.tag),this.formData.append("identifier",-1),this.formData.append("description",this.description),this.formData.append("name",this.itemName),this.formData.append("username",this.username),this.formData.append("replaceFee",this.replaceFee),this.formData.append("dailyRate",this.dailyRate),this.formData.append("tags",this.tags),W.postDataToServer(this.formData),this.props.closeModal())}},{key:"handleFormChange",value:function(){this.setState({plusShown:!1}),this.props.application.setState({signedIn:!0,user:this.username})}},{key:"handleCancel",value:function(){this.setState({plusShown:!0}),this.props.application.setState({signedIn:!0,user:this.username})}},{key:"uploadFile",value:function(e){var t=e.target.files[0];t&&this.formData.append("image",t)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(v.a,{style:{marginTop:"2%",marginBottom:"2%"},text:!0},r.a.createElement(j.a,{as:"h2"},"Adding an Item"),r.a.createElement(k.a,null,r.a.createElement(k.a.Field,null,r.a.createElement("label",null,"Title"),r.a.createElement("input",{type:"text",name:"name",id:"itemNameField",onChange:function(){e.itemName=document.getElementById("itemNameField").value},required:!0})),r.a.createElement(k.a.Field,null,r.a.createElement("label",null,"Description"),r.a.createElement("input",{type:"text",name:"description",id:"descField",onChange:function(){e.description=document.getElementById("descField").value},required:!0})),r.a.createElement(k.a.Field,null,r.a.createElement("label",null,"Daily Rate"),r.a.createElement("input",{type:"number",step:"0.01",name:"dailyRate",id:"dailyRateField",onChange:function(){e.dailyRate=document.getElementById("dailyRateField").value},required:!0})),r.a.createElement(k.a.Field,null,r.a.createElement("label",null,"Replacement Fee"),r.a.createElement("input",{type:"number",step:"0.01",name:"replaceFee",id:"replacementField",onChange:function(){e.replaceFee=document.getElementById("replacementField").value},required:!0})),r.a.createElement(k.a.Field,null,r.a.createElement("label",null,"Tags"),r.a.createElement("input",{type:"text",name:"tag",id:"tagField",onChange:function(){e.tag=document.getElementById("tagField").value},required:!0})),r.a.createElement(k.a.Field,null,r.a.createElement("label",null,"Images"),r.a.createElement("input",{type:"file",accept:"image/jpeg, image/png",name:"image",id:"imageField",onChange:this.uploadFile,required:!0})),r.a.createElement(E.a,{onClick:function(){e.handleSubmit()}},"Submit"),r.a.createElement(E.a,{onClick:function(){e.props.navbar.setState({modalOpen:!1})}},"Cancel"))))}}]),t}(r.a.Component),J=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={items:[]},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"filterBySearchQuery",value:function(e,t,a){var n=[],r=Number.MAX_VALUE;return""!=a&&1!=isNaN(parseFloat(a))&&(r=parseFloat(a)),e.forEach((function(e){if(e.dailyRate<=r)if(e.name.toLowerCase().includes(t.toLowerCase())||t.toLowerCase().includes(e.name.toLowerCase()))n.push(e);else if(e.description.toLowerCase().includes(t.toLowerCase())||t.toLowerCase().includes(e.description.toLowerCase()))n.push(e);else if(e.userID.toLowerCase().includes(t.toLowerCase())||t.toLowerCase().includes(e.userID.toLowerCase()))n.push(e);else{var a=!1;e.tags.forEach((function(e){(e.toLowerCase().includes(t.toLowerCase())||t.toLowerCase().includes(e.toLowerCase()))&&(a=!0)})),a&&n.push(e)}})),n}},{key:"getDataFromServer",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t,a,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null==this.props.user?"https://borrow-java.herokuapp.com/items":"https://borrow-java.herokuapp.com/items/user/"+this.props.user,e.next=3,W.getDataFromServer(t);case 3:a=e.sent,a=this.filterBySearchQuery(a,this.props.searchQuery,this.props.maxPrice),this.setState({items:a}),window.setTimeout((function(){n.getDataFromServer(t)}),200);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getDataFromServer()}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{style:{marginTop:"10px"}},r.a.createElement(D.a,{columns:4},this.state.items.map((function(t){return r.a.createElement(H,{key:t.itemID,item:t,application:e.props.application})})))," ")}}]),t}(r.a.Component),H=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(D.a.Column,{stretched:!0},r.a.createElement(P,{item:this.props.item,application:this.props.application}))}}]),t}(r.a.Component),$=a(920),G=a(908),K=a(912),X=a(436),Z=(Object(C.b)(M.a),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a.handleRate=function(e,t){var n=t.rating,r=t.maxRating;return a.setState({rating:n,maxRating:r})},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(y.a,{trigger:r.a.createElement($.a,{icon:"star",onRate:this.handleRate,defaultRating:0,maxRating:5,size:"massive"})},r.a.createElement(y.a.Content,null,r.a.createElement(ie,{rating:this.state.rating,userID:this.props.userID,seller:this.props.seller}))))}}]),t}(r.a.Component)),ee=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).uploadFile=a.uploadFile.bind(Object(h.a)(a)),a.formData=new FormData,a.state={profile:"",payPal:!1,balance:0},a.amt=0,a.email="",a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handlePayment",value:function(e,t){var a=this;fetch("/paypal-transaction-complete",{method:"post",body:JSON.stringify({orderID:e.orderID,details:t})}).then((function(){a.addFunds(),a.setState({payPal:!1})}))}},{key:"handleSubmit",value:function(){this.updateDataOnServer(this.props.user,this.formData)}},{key:"updateDataOnServer",value:function(e,t){return fetch("https://borrow-java.herokuapp.com/users/".concat(e),{method:"PUT",body:t})}},{key:"uploadFile",value:function(e){var t=e.target.files[0];t&&this.formData.append("image",t)}},{key:"withdrawFunds",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n,r,s,i,o,c,l=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a={method:"POST",headers:{"Content-Type":"application/x-www-form-url-encoded",Authorization:"Basic QVRnVVNHM1BWMVRnWDZpdXhhNlRFYjlsYWw4YnpUMlFSalgtdkhLTk4yZktuNW9RR1hUcW1zeFBiQW4tbTlOM1FBUjlSdnltaGVGWVJKdmQ6RURxV0NET3hDaVY5Yk5wcW9CUmR2NWZ0SHBKcHQ4Z1ktdEpxWVpLOGpJWU5TaGs4a3RvbDJJMTQ0NnVIVzlCQkh6b1VmR0puUFFZQkhza0Q="}}).body="grant_type=client_credentials",n="",e.next=5,fetch("https://api.sandbox.paypal.com/v1/oauth2/token",a).then((function(e){return e.json()})).then((function(e){n=e.access_token}));case 5:return r={sender_batch_header:{sender_batch_id:Date.now(),email_subject:"You have a payout!",email_message:"You have received a payout! Thanks for using our service!"},items:[{recipient_type:"EMAIL",amount:{value:this.state.balance,currency:"USD"},note:"Thanks for your patronage!",sender_item_id:Date.now(),receiver:t}]},s={method:"POST",headers:{Authorization:"Bearer "+n,"Content-Type":"application/json"}},r&&(s.body=JSON.stringify(r)),e.next=10,fetch("https://borrow-java.herokuapp.com/users/"+this.props.user);case 10:return i=e.sent,e.next=13,i.json();case 13:return o=e.sent,c=o.balance,e.next=17,fetch("https://api.sandbox.paypal.com/v1/payments/payouts",s).then((function(e){if(e.ok){l.setState({balance:0}),alert("Funds withdrawn!");var t=new FormData;t.append("amount",-c),fetch("https://borrow-java.herokuapp.com/users/"+l.props.user,{method:"PUT",body:t})}}));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addFunds",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({payPal:!0}),t=this.props.application.state.user,(a=new FormData).append("amount",this.amt),fetch("https://borrow-java.herokuapp.com/users/"+t,{method:"PUT",body:a}),document.getElementById("payAmt").value=0;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserBalance",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n,r=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://borrow-java.herokuapp.com/users/".concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,this.setState({balance:n.balance}),window.setTimeout((function(){r.getUserBalance(t)}),200);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getUserImage(this.props.user),this.getUserBalance(this.props.application.state.user)}},{key:"getUserImage",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n,r=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://borrow-java.herokuapp.com/users/".concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,this.setState({profile:n.img}),window.setTimeout((function(){r.getUserImage(t)}),200);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,null,r.a.createElement(G.a,null),r.a.createElement(b.a,{src:"data:image/jpeg;base64,".concat(this.state.profile),size:"medium",circular:!0}),r.a.createElement(D.a,{centered:!0,columns:2,divided:!0},r.a.createElement(D.a.Row,null,r.a.createElement(D.a.Column,null,r.a.createElement(j.a,{as:"h1"},this.props.application.state.accountid," + ",this.state.balance," "),r.a.createElement("input",{type:"file",accept:"image/jpeg, image/png",name:"image",id:"file",onChange:this.uploadFile}),r.a.createElement(E.a,{onClick:function(){e.handleSubmit()}},"Submit Profile Picture "),r.a.createElement("div",{style:this.state.payPal?{}:{display:"none"}},r.a.createElement("h1",null,"Adding $",this.amt," to your account"),r.a.createElement(X.PayPalButton,{amount:this.amt,onSuccess:function(t,a){e.handlePayment(a,t)},options:{clientId:"ATgUSG3PV1TgX6iuxa6TEb9lal8bzT2QRjX-vHKNN2fKn5oQGXTqmsxPbAn-m9N3QAR9RvymheFYRJvd"}}))),r.a.createElement(D.a.Column,null,r.a.createElement(j.a,{as:"h2"},"Balance:  ",this.state.balance),r.a.createElement(k.a.Field,null,r.a.createElement(w.a,{type:"text",id:"email",placeholder:"example@gmail.com",onChange:function(){e.email=document.getElementById("email").value}}),r.a.createElement(E.a,{onClick:function(){return e.withdrawFunds(e.email)}},"Withdraw Funds")),r.a.createElement(k.a.Field,null,r.a.createElement(w.a,{style:this.state.payPal?{display:"none"}:{},id:"payAmt",placeholder:"$0.00",type:"number",onChange:function(){e.amt=document.getElementById("payAmt").value}}),r.a.createElement(E.a,{style:this.state.payPal?{display:"none"}:{},onClick:function(){e.setState({payPal:0!==e.amt})}},"ADD FUNDS"))))),r.a.createElement(G.a,null))}}]),t}(r.a.Component),te=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={profile:"",balance:0},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getUserImage(this.props.user),this.getUserBalance(this.props.application.state.user)}},{key:"updateBalance",value:function(e,t){var a=new FormData;a.append("amount",t),fetch("https://borrow-java.herokuapp.com/users/"+e,{method:"PUT",body:a})}},{key:"payUser",value:function(){var e=this.props.application.state.user,t=this.props.application.state.accountid,a=document.getElementById("payAmt"),n=a.value;a.value=0,this.state.balance<n?alert("Your Balance is too low!"):(this.updateBalance(e,-1*n),this.updateBalance(t,n),alert("Paid"))}},{key:"getUserImage",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n,r=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://borrow-java.herokuapp.com/users/".concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,this.setState({profile:n.img}),window.setTimeout((function(){r.getUserImage(t)}),200);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserBalance",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n,r=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://borrow-java.herokuapp.com/users/".concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,this.setState({balance:n.balance}),window.setTimeout((function(){r.getUserBalance(t)}),200);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(b.a,{src:"data:image/jpeg;base64,".concat(this.state.profile),wrapped:!0,ui:!1,height:100,width:100}),r.a.createElement("h1",null,this.props.application.state.accountid," "),r.a.createElement("input",{id:"payAmt",placeholder:"$0.00",type:"number"}),r.a.createElement("button",{onClick:function(){e.payUser()}},"PAY ME"),r.a.createElement(D.a.Column,null,r.a.createElement(j.a,null," Renter Rating "),r.a.createElement(Z,{userID:this.props.user,seller:0}),r.a.createElement(y.a,{trigger:r.a.createElement(E.a,null,"Show Renter Reviews")},r.a.createElement(y.a.Content,null,r.a.createElement(se,{seller:0,userID:this.props.user}))),r.a.createElement(j.a,null," Rentee Rating "),r.a.createElement(Z,{userID:this.props.user,seller:1}),r.a.createElement(y.a,{trigger:r.a.createElement(E.a,null,"Show Rentee Reviews")},r.a.createElement(y.a.Content,null,r.a.createElement(se,{seller:1,userID:this.props.user})))))}}]),t}(r.a.Component),ae=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(S.a,null,r.a.createElement(S.a.Content,null,r.a.createElement($.a,{icon:"star",defaultRating:this.props.rating,maxRating:5,size:"large",disabled:!0})),r.a.createElement(S.a.Content,{description:"".concat(this.props.review)}))}}]),t}(r.a.Component),ne=function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,null,[{key:"getDataFromServer",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Array,e.next=3,fetch(t);case 3:return e.next=5,e.sent.json();case 5:return e.sent.forEach((function(e){a.push(new re(e.rating,e.review,e.seller))})),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();ne.postDataToServer=function(e,t){var a={};e.forEach((function(e,t){a[t]=e}));JSON.stringify(a);return fetch("https://borrow-java.herokuapp.com/users/".concat(t,"/feedback"),{method:"POST",body:e})};var re=function e(t,a,n,r){Object(o.a)(this,e),this.id=r,this.rating=t,this.review=a,this.seller=n},se=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={feedbacks:[],seller:a.props.seller},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"getDataFromServer",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://borrow-java.herokuapp.com/users/".concat(this.props.userID,"/feedback"),e.next=3,ne.getDataFromServer(t);case 3:a=e.sent,this.setState({feedbacks:a});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleBuyerSeller",value:function(){1==this.state.seller?this.setState({seller:0}):this.setState({seller:1}),this.getDataFromServer()}},{key:"componentDidMount",value:function(){this.getDataFromServer()}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,null,r.a.createElement(j.a,null,"Reviews"),r.a.createElement(K.a,null,this.state.feedbacks.filter((function(t){return t.seller==e.state.seller})).map((function(e){return r.a.createElement(ae,{key:e.id,rating:e.rating,review:e.review})}))))}}]),t}(r.a.Component),ie=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={showForm:!1,rating:a.props.rating,review:"",seller:a.props.seller},a.formData=new FormData,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handleSubmit",value:function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.formData.append("rating",this.state.rating),this.formData.append("review",this.review),this.formData.append("seller",this.state.seller),e.next=5,ne.postDataToServer(this.formData,t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,null,r.a.createElement(j.a,{as:"h2",icon:!0},r.a.createElement(I.a,{name:"settings"}),"Add a review!"),r.a.createElement(k.a,{onSubmit:function(){e.handleSubmit(e.props.userID)}},r.a.createElement(k.a.Field,{required:!0},r.a.createElement("label",null,"Review:"),r.a.createElement(w.a,{type:"textarea",id:"review",rows:"3",onChange:function(){e.review=document.getElementById("review").value}})),r.a.createElement(k.a.Button,{content:"Submit"})))}}]),t}(r.a.Component),oe=function e(t,a,n,r,s,i,c){Object(o.a)(this,e),this.chatID=t,this.messages=a,this.user1ID=n,this.user2ID=r,this.lastMessage=s,this.U1Seen=i,this.U2Seen=c},ce=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={chats:[]},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"getDataFromServer",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t,a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Array,e.next=3,fetch("https://borrow-java.herokuapp.com/chat/user/"+this.props.user);case 3:return e.next=5,e.sent.json();case 5:e.sent.forEach((function(e){t.push(new oe(e.chatID,e.messages,e.user1,e.user2,e.lastMessageTime,e.lastU1seen,e.lastU2seen))})),this.setState({chats:t}),window.setTimeout((function(){a.getDataFromServer()}),200);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getDataFromServer()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",{style:{marginTop:"10px"}},"Messages"),this.state.chats.map((function(t){return r.a.createElement(le,{chat:t,user:e.props.user})})))}}]),t}(r.a.Component),le=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={messageOpen:!1},a.seen=!1,a.otherUser=a.props.chat.user1ID,a.props.chat.user1ID===a.props.user&&(a.otherUser=a.props.chat.user2ID),a.displayMessage=a.props.chat.messages.substring(a.props.chat.messages.lastIndexOf(":")+1),a.seen=!0,a.props.user===a.props.chat.user1ID&&a.props.chat.U1Seen<a.props.chat.lastMessage?a.seen=!1:a.props.user===a.props.chat.user2ID&&a.props.chat.U2Seen<a.props.chat.lastMessage&&(a.seen=!1),a.lastMessageTime=new Date(parseInt(a.props.chat.lastMessage)),a.hours=a.lastMessageTime.getHours()%12==0?12:a.lastMessageTime.getHours()%12,a.minutes=a.lastMessageTime.getMinutes(),a.pmam=a.lastMessageTime.getHours()>11?"AM":"PM",a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{cursor:"pointer",marginTop:"10px",fontWeight:this.seen?"normal":"bold"}},r.a.createElement(y.a,{open:this.state.messageOpen,trigger:r.a.createElement(x.a,{onClick:function(){e.setState({messageOpen:!0})}},r.a.createElement("div",null,r.a.createElement("p",null,this.otherUser)),r.a.createElement("div",null,r.a.createElement("p",null,this.hours,":",this.minutes," ",this.pmam),r.a.createElement("p",null,this.displayMessage)))},r.a.createElement(v.a,null,r.a.createElement(A,{closeModal:function(){e.setState({messageOpen:!1}),e.seen=!0},application:this.props.application,user2:this.otherUser,user1:this.props.user}))))}}]),t}(r.a.Component),ue=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={signedIn:!1,user:null,searchQuery:"",account:!1,accountid:null,maxPrice:"",onMessagePage:!1},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.state.signedIn?this.state.account&&this.state.accountid===this.state.user?r.a.createElement(v.a,{style:{paddingTop:"5px"}},r.a.createElement(Y,{application:this,user:this.state.user}),r.a.createElement(ee,{application:this,user:this.state.accountid}),r.a.createElement(J,{searchQuery:this.state.searchQuery,maxPrice:this.state.maxPrice,application:this,user:this.state.accountid})):this.state.account&&this.state.accountid!==this.state.user?r.a.createElement(v.a,{style:{paddingTop:"5px"}},r.a.createElement(Y,{application:this,user:this.state.user}),r.a.createElement(te,{application:this,user:this.state.accountid}),r.a.createElement(J,{searchQuery:this.state.searchQuery,maxPrice:this.state.maxPrice,application:this,user:this.state.accountid})):this.state.onMessagePage?r.a.createElement(v.a,{style:{paddingTop:"5px"}},r.a.createElement(Y,{application:this,user:this.state.user}),r.a.createElement(ce,{user:this.state.user})):r.a.createElement(v.a,{style:{paddingTop:"5px"}},r.a.createElement(Y,{application:this,user:this.state.user}),r.a.createElement(J,{searchQuery:this.state.searchQuery,maxPrice:this.state.maxPrice,application:this,user:null})):r.a.createElement("div",{style:{paddingTop:"5px"}},r.a.createElement(pe,null),r.a.createElement(_,{application:this}))}}]),t}(r.a.Component),pe=function(){return r.a.createElement("header",null,r.a.createElement(v.a,{textAlign:"center"},r.a.createElement("h1",null,"Borrow"),r.a.createElement("h4",null,r.a.createElement("small",null,"Peer to peer, cloud based, clothing rental built with AI solutions.")),r.a.createElement("br",null)))},he=ue;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(he,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[447,1,2]]]);
//# sourceMappingURL=main.43fa2b45.chunk.js.map