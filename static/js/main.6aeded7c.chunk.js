(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{447:function(e,t,a){e.exports=a(897)},452:function(e,t,a){},453:function(e,t,a){e.exports=a.p+"static/media/logo.25bf045c.svg"},454:function(e,t,a){},897:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(30),i=a.n(r),o=(a(452),a(18)),l=a(20),c=a(24),u=a(25),p=a(26),h=(a(453),a(454),a(38)),m=a(15),d=a.n(m),g=a(31),f=a(915),v=a(906),E=a(438),y=a(910),b=a(898),D=a(907),w=a(917),O=a(909),j=a(919),k=a(914),S=(a(292),a(913)),I=a(79),F=a(918),C=a(911),x=a(131),T=a(205),M=a.n(T),R=(a(357),Object(x.b)(M.a)),U=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleSelect=function(e){var t=e.start,n=e.end;console.log(t),console.log(n);var s=document.getElementById("startDateField"),r=t.getDate();r<10&&(r="0"+r);var i=t.getMonth()+1;i<10&&(i="0"+i);var o=n.getDate();o<10&&(o="0"+o);var l=n.getMonth()+1;l<10&&(l="0"+l),s.value=t.getFullYear()+"-"+i+"-"+r,console.log(s.value),a.props.rentDetail.setState({startDate:s.value});var c=document.getElementById("endDateField");c.value=n.getFullYear()+"-"+l+"-"+o,console.log(c.value),a.props.rentDetail.setState({endDate:c.value})};var n=new Date,s=new Date;n.setDate(27),n.setMonth(10),n.setFullYear(2019),s.setDate(20),s.setMonth(10),s.setFullYear(2019),a.itemEvents=[],a.bookingString=a.props.item.booking,a.bookings=a.bookingString.split("||");for(var r=1;r<a.bookings.length;r++){var i=a.bookings[r].substring(a.bookings[r].indexOf("(")),l=i.substring(1,i.indexOf(",")),p=i.substring(i.indexOf(",")+1,i.indexOf(")")),h=l.split("-"),m=p.split("-"),d=new Date,g=new Date;d.setDate(Number(m[2])),d.setMonth(Number(m[1])-1),d.setFullYear(Number(m[0])),g.setDate(Number(h[2])),g.setMonth(Number(h[1])-1),g.setFullYear(Number(h[0])),a.itemEvents.push({allDay:!0,end:d,start:g,title:"Booked"})}return a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(x.a,{views:["month"],selectable:!0,localizer:R,events:this.itemEvents,startAccessor:"start",endAccessor:"end",style:{height:500},onSelectSlot:this.handleSelect}))}}]),t}(s.a.Component),P=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={modelOpen:!1,messageOpen:!1,itemCalanderShown:!1},a.ownsItem=a.props.application.state.user===a.props.item.userID,a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement(S.a,null,s.a.createElement(E.a,{src:"data:image/jpeg;base64,".concat(this.props.item.img),wrapped:!0,ui:!1}),s.a.createElement(S.a.Content,null,s.a.createElement(S.a.Header,null," ",this.props.item.name),s.a.createElement(S.a.Description,null,s.a.createElement("strong",null,"Description: "),this.props.item.description," "),s.a.createElement(S.a.Description,null,s.a.createElement("strong",null,"Daily Rate: "),"$",this.props.item.dailyRate),s.a.createElement(S.a.Description,null,s.a.createElement("strong",null,"Replace Fee: "),"$",this.props.item.replaceFee),s.a.createElement(S.a.Description,null,s.a.createElement("strong",null,"Tags: "),this.props.item.tags)),s.a.createElement(S.a.Content,{extra:!0},s.a.createElement("div",{className:"ui two buttons"},s.a.createElement(y.a,{open:this.state.itemCalanderShown,trigger:s.a.createElement(b.a,{style:{display:this.ownsItem?"inline":"none"},basic:!0,color:"blue",onClick:function(){e.setState({itemCalanderShown:!0})}},"Calander")},s.a.createElement(v.a,null,s.a.createElement(B,{closeModal:function(){e.setState({itemCalanderShown:!1})},application:this.props.application,item:this.props.item,user1:this.props.application.state.user}))),s.a.createElement(y.a,{open:this.state.modalOpen,trigger:s.a.createElement(b.a,{style:{display:this.ownsItem?"none":"inline"},basic:!0,color:"green",onClick:function(){e.setState({modalOpen:!0})}},"Rent")},s.a.createElement(v.a,null,s.a.createElement(A,{closeModal:function(){e.setState({modalOpen:!1})},application:this.props.application,user2:this.props.item.userID,user1:this.props.application.state.user,item:this.props.item,dailyRate:this.props.item.dailyRate}))),s.a.createElement(y.a,{open:this.state.messageOpen,trigger:s.a.createElement(b.a,{basic:!0,color:"red",onClick:function(){e.setState({messageOpen:!0})}},"Send Message")},s.a.createElement(v.a,null,s.a.createElement(N,{closeModal:function(){e.setState({messageOpen:!1})},application:this.props.application,user2:this.props.item.userID,user1:this.props.application.state.user,item:this.props.item}))))),s.a.createElement(S.a.Content,{extra:!0},s.a.createElement("a",{onClick:function(){e.props.application.setState({account:!0,accountid:e.props.item.userID})}},s.a.createElement(I.a,{name:"user"}),this.props.item.userID)))}}]),t}(s.a.Component),B=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={messgaes:"",chatID:0,userRentee:"",startDate:"",endDate:""},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"getChat",value:function(){var e=Object(g.a)(d.a.mark((function e(){var t,a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:7000/chat/user/"+this.props.user1+"/"+this.state.userRentee+"/").then((function(e){return e.json().then((function(e){a.setState({messages:e.messages,chatID:e.chatID})}))}));case 3:e.next=13;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0),(t=new FormData).append("user1ID",this.props.user1),t.append("user2ID",this.state.userRentee),fetch("http://localhost:7000/chat/",{method:"POST",body:t}),window.setTimeout((function(){}),2e3);case 13:return e.prev=13,window.setTimeout((function(){a.getChat()}),200),e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[0,5,13,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"addBooking",value:function(){var e=new FormData;e.append("booking","||"+this.state.userRentee+":("+this.state.startDate+","+this.state.endDate+")"),fetch("http://localhost:7000/items/"+this.props.item.itemID+"/",{method:"PUT",body:e})}},{key:"sendMessage",value:function(){if(0!==this.state.chatID){var e=new FormData;e.append("message","||"+this.props.user1+": I have confirmed your schedule to rent "+this.props.item.name+" from "+this.state.startDate+" to "+this.state.endDate+" if this is a mistake please message me ASAP"),e.append("senderID",this.props.user1),fetch("http://localhost:7000/chat/"+this.state.chatID+"/",{method:"PUT",body:e}),this.props.closeModal()}}},{key:"handleRequest",value:function(){var e=this;""!==this.state.startDate&&""!==this.state.endDate&&this.getChat().then((function(){e.addBooking(),e.sendMessage()}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(v.a,{style:{marginTop:"5%",marginBottom:"5%"},text:!0},s.a.createElement(j.a,{as:"h2"},"Item Schedule"),s.a.createElement(U,{rentDetail:this,item:this.props.item}),s.a.createElement(O.a,null,s.a.createElement(O.a.Field,null,s.a.createElement("label",null,"Start Date"),s.a.createElement("input",{readOnly:!0,required:!0,type:"date",name:"startDate",id:"startDateField",onChange:function(){e.setState({startDate:document.getElementById("startDateField").value})}})),s.a.createElement(O.a.Field,null,s.a.createElement("label",null,"End Date"),s.a.createElement("input",{readOnly:!0,required:!0,type:"date",name:"endDate",id:"endDateField",onChange:function(){e.setState({endDate:document.getElementById("endDateField").value})}}),s.a.createElement("label",null,"Requesting User"),s.a.createElement("input",{type:"text",name:"user",id:"nameField",onChange:function(){e.setState({userRentee:document.getElementById("nameField").value})}}))),s.a.createElement(b.a,{onClick:this.props.closeModal},"Cancel"),s.a.createElement(b.a,{onClick:function(){e.handleRequest()}},"Add Reservation")))}}]),t}(s.a.Component),A=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={messages:"",chatID:0,validDates:null,startDate:"",endDate:""},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getChat()}},{key:"getChat",value:function(){var e=Object(g.a)(d.a.mark((function e(){var t,a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:7000/chat/user/"+this.props.user1+"/"+this.props.user2+"/").then((function(e){return e.json().then((function(e){a.setState({messages:e.messages,chatID:e.chatID})}))}));case 3:e.next=13;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0),(t=new FormData).append("user1ID",this.props.user1),t.append("user2ID",this.props.user2),fetch("http://localhost:7000/chat/",{method:"POST",body:t}),window.setTimeout((function(){}),2e3);case 13:return e.prev=13,window.setTimeout((function(){a.getChat()}),200),e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[0,5,13,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"sendMessage",value:function(){var e=new FormData;e.append("message","||"+this.props.user1+": I would like to rent "+this.props.item.name+" from "+this.state.startDate+" to "+this.state.endDate+" for $"+this.props.dailyRate*this.getDaysBetween(this.state.startDate,this.state.endDate)+" ID="+this.props.item.itemID),e.append("senderID",this.props.user1),fetch("http://localhost:7000/chat/"+this.state.chatID+"/",{method:"PUT",body:e}),this.props.closeModal()}},{key:"handleRequest",value:function(){""===this.state.startDate||""===this.state.endDate?this.setState({validDates:!1}):(this.setState({validDates:!0}),this.sendMessage())}},{key:"getDaysBetween",value:function(e,t){if(""===this.state.startDate||""===this.state.endDate)return 0;console.log(e);var a=e.split("-"),n=t.split("-");console.log("START"),console.log(a),console.log("END"),console.log(n);var s=0;if(s+=365*(n[0]-a[0]),s+=31*(n[1]-a[1]),(s+=n[2]-a[2])<0)return 0;for(var r=[],i=a[1];i<n[1];i++)r.push(i);return r.includes(2)&&(s-=3),r.includes(4)&&(s-=1),r.includes(6)&&(s-=1),r.includes(9)&&(s-=1),r.includes(11)&&(s-=1),s}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(v.a,{style:{marginTop:"5%",marginBottom:"5%"},text:!0},s.a.createElement(j.a,{as:"h2"},"Request to Rent"),s.a.createElement(U,{rentDetail:this,item:this.props.item}),s.a.createElement("p",null,"Total Cost: $",this.props.dailyRate*this.getDaysBetween(this.state.startDate,this.state.endDate)),s.a.createElement(O.a,{success:null!=this.state.validDates&&this.state.validDates,error:null!=this.state.validDates&&!this.state.validDates},s.a.createElement(O.a.Field,null,s.a.createElement("label",null,"Start Date"),s.a.createElement("input",{readOnly:!0,required:!0,type:"date",name:"startDate",id:"startDateField",onChange:function(){e.setState({startDate:document.getElementById("startDateField").value})}})),s.a.createElement(O.a.Field,null,s.a.createElement("label",null,"End Date"),s.a.createElement("input",{readOnly:!0,required:!0,type:"date",name:"endDate",id:"endDateField",onChange:function(){e.setState({endDate:document.getElementById("endDateField").value})}})),s.a.createElement("hr",null),s.a.createElement(k.a,{success:!0,header:"Rental message sent.",content:"A message has been sent to the renter"}),s.a.createElement(k.a,{error:!0,header:"Rental message failed.",content:"Please select valid start and end dates."}),s.a.createElement("p",null,"Total Cost: $",this.props.dailyRate*this.getDaysBetween(this.state.startDate,this.state.endDate)),s.a.createElement(b.a,{onClick:function(){e.handleRequest()}},"Request to Rent"),s.a.createElement(b.a,{onClick:this.props.closeModal},"Cancel"))))}}]),t}(s.a.Component),N=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={messages:"",chatID:0},a.userMessage="",a.win=null,a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"updateRead",value:function(){console.log(this.props.user1+" is reading");var e=new FormData;e.append("userID",this.props.user1),fetch("http://localhost:7000/chat/"+this.state.chatID+"/user/",{method:"PUT",body:e})}},{key:"componentDidMount",value:function(){this.getChat()}},{key:"getChat",value:function(){var e=Object(g.a)(d.a.mark((function e(){var t,a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:7000/chat/user/"+this.props.user1+"/"+this.props.user2+"/").then((function(e){return e.json().then((function(e){a.setState({messages:e.messages,chatID:e.chatID}),a.updateRead()}))}));case 3:e.next=13;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0),(t=new FormData).append("user1ID",this.props.user1),t.append("user2ID",this.props.user2),fetch("http://localhost:7000/chat/",{method:"POST",body:t}),window.setTimeout((function(){}),2e3);case 13:return e.prev=13,this.win=window.setTimeout((function(){a.getChat()}),200),e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[0,5,13,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"sendMessage",value:function(e){if(""!==this.userMessage&&"Enter"===e.key){var t=new FormData;t.append("message","||"+this.props.user1+":"+this.userMessage),t.append("senderID",this.props.user1),fetch("http://localhost:7000/chat/"+this.state.chatID+"/",{method:"PUT",body:t}),document.getElementById("messageField").value="";var a=document.getElementById("msgDiv");null!=a&&(a.scrollTop=a.scrollHeight),this.userMessage=""}}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(v.a,{style:{marginTop:"2%",marginBottom:"2%"},text:!0},s.a.createElement(w.a,null,s.a.createElement(w.a.Column,{floated:"left",width:5},s.a.createElement(j.a,{as:"h2"},"Messaging: ",this.props.user2)),s.a.createElement(w.a.Column,{floated:"right",width:1},s.a.createElement(b.a,{circular:!0,className:"left floated",onClick:function(){window.clearTimeout(e.win),e.props.closeModal()}},s.a.createElement(I.a,{name:"close"})))),s.a.createElement(F.a,null,s.a.createElement(L,{user:this.props.user1,messages:this.state.messages,item:this.props.item,chat:this})),s.a.createElement(O.a,null,s.a.createElement(O.a.Field,null,s.a.createElement("input",{type:"text",name:"message",id:"messageField",onKeyPress:function(t){e.sendMessage(t)},onChange:function(){e.userMessage=document.getElementById("messageField").value}})))))}}]),t}(s.a.Component),L=function(e){function t(e){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"getMessages",value:function(){for(var e=this.props.messages.split("||"),t=[],a=0;a<e.length;a++){var n=e[a];if(""!==n){var r=n.indexOf(":"),i=n.substr(0,r);n=n.substr(r+1),a===e.length-1?t.push(s.a.createElement(q,{user:i,message:n,chat:this.props.chat,currentUser:this.props.user,last:!0,item:this.props.item})):t.push(s.a.createElement(q,{user:i,message:n,chat:this.props.chat,currentUser:this.props.user,last:!1,item:this.props.item}))}}return t}},{key:"render",value:function(){return s.a.createElement("div",{id:"msgDiv",style:{overflowY:"scroll",height:"50vh"}},this.getMessages())}}]),t}(s.a.Component),q=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).rentable=!1,a.textAlign="right",a.props.currentUser===a.props.user&&(a.textAlign="left");var n=new RegExp("I would like to rent .* from .* to .* for .* ID=.*");if(a.props.last&&n.test(a.props.message)&&a.props.currentUser!==a.props.user){a.rentable=!0;var s=a.props.message,r=s.indexOf("rent")+5,i=(s=s.substring(r)).indexOf("from");a.itemName=s.substring(0,i);var l=(s=s.substring(i+4)).indexOf("to");a.startDate=s.substring(0,l);var p=(s=s.substring(l+2)).indexOf("for");a.endDate=s.substring(0,p);var h=(s=s.substring(p+5)).indexOf("ID=");a.amount=s.substring(0,h),a.itemID=s.substring(h+3)}return a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"handleResponse",value:function(e){var t=this;e?(console.log("hi"),this.addBooking().then((function(){t.sendMessage(e)}))):this.sendMessage(e)}},{key:"addBooking",value:function(){var e=Object(g.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("booking","||"+this.props.user+":("+this.startDate+","+this.endDate+")"),e.next=4,fetch("http://localhost:7000/items/"+this.itemID+"/",{method:"PUT",body:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sendMessage",value:function(e){if(0!==this.props.chat.state.chatID){var t=new FormData;e?t.append("message","||"+this.props.currentUser+": I have confirmed your request to rent "+this.itemName+" from "+this.startDate+" to "+this.endDate+" please make the appropriate payment to my account within the next 24 hours."):t.append("message","||"+this.props.currentUser+": I have denied your request to rent "+this.itemName+" from "+this.startDate+" to "+this.endDate),t.append("senderID",this.props.currentUser),fetch("http://localhost:7000/chat/"+this.props.chat.state.chatID+"/",{method:"PUT",body:t})}}},{key:"render",value:function(){var e=this;return s.a.createElement(C.a,{style:{textAlign:this.textAlign,padding:"2vh"}},s.a.createElement(C.a.Avatar,{src:"https://react.semantic-ui.com/images/avatar/small/matt.jpg"}),s.a.createElement(C.a.Content,null,s.a.createElement(C.a.Author,{as:"a"},this.props.user),s.a.createElement(C.a.Text,null,this.props.message),s.a.createElement("button",{style:{display:this.rentable?"inline":"none",backgroundColor:"green"},onClick:function(){e.handleResponse(!0)}},"Ok"),s.a.createElement("button",{style:{display:this.rentable?"inline":"none",backgroundColor:"red"},onClick:function(){e.handleResponse(!1)}},"No")))}}]),t}(s.a.Component),Q=function e(t,a,n,s,r,i,l,c,u){Object(o.a)(this,e),this.itemID=t,this.description=a,this.name=n,this.userID=s,this.replaceFee=r,this.dailyRate=i,this.tags=l[0].split(", "),this.img=c,this.booking=u},Y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={modalOpen:!1,messages:0,imgPath:"message.png"},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getMessagesFromServer()}},{key:"getMessagesFromServer",value:function(){var e=Object(g.a)(d.a.mark((function e(){var t,a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=0,e.next=3,fetch("http://localhost:7000/chat/user/"+this.props.user);case 3:return e.next=5,e.sent.json();case 5:e.sent.forEach((function(e){(a.props.user===e.user1&&e.lastU1seen<e.lastMessageTime||a.props.user===e.user2&&e.lastU2seen<e.lastMessageTime)&&(t+=1)})),t>0?this.setState({messages:t,imgPath:"messageAlert.png"}):this.setState({messages:t,imgPath:"message.png"}),window.setTimeout((function(){a.getMessagesFromServer()}),200);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return s.a.createElement(f.a,{widths:6,attached:"top"},s.a.createElement(f.a.Item,{onClick:function(){e.props.application.setState({account:!1,onMessagePage:!1})}},s.a.createElement(v.a,{style:{padding:"1.5% 7.5% 1.5% 7.5%"}},s.a.createElement(E.a,{src:"brw.png",rounded:!0}))),s.a.createElement(f.a.Item,{style:{paddingRight:"15px"}},s.a.createElement(y.a,{open:this.state.modalOpen,trigger:s.a.createElement(b.a,{style:{margin:"2% 10% 2% 10%"},onClick:function(){e.setState({modalOpen:!0})}},s.a.createElement(b.a.Content,null,"Add Item"))},s.a.createElement(v.a,null,s.a.createElement(W,{closeModal:function(){e.setState({modalOpen:!1})},application:this.props.application,navbar:this})))),s.a.createElement(f.a.Item,null,s.a.createElement(v.a,null,s.a.createElement(D.a,{size:"mini",id:"searchQuery",onChange:function(){e.props.application.setState({searchQuery:document.getElementById("searchQuery").value})},icon:{name:"search",circular:!0},placeholder:"Search..."}),s.a.createElement(D.a,{style:{margin:"10px 10px 0px 10px"},type:"number",onChange:function(){e.props.application.setState({maxPrice:document.getElementById("maxPrice").value})},size:"mini",id:"maxPrice",icon:{name:"dollar sign"},placeholder:"Max Price"}))),s.a.createElement(f.a.Item,{style:{paddingLeft:"15px"},onClick:function(){e.props.application.setState({account:!0,accountid:e.props.application.state.user,onMessagePage:!1})}},s.a.createElement(v.a,null,s.a.createElement("span",null,"User: ",this.props.application.state.user))),s.a.createElement(f.a.Item,{onClick:function(){e.props.application.setState({onMessagePage:!0,account:!1,accountid:null})}},s.a.createElement("figure",null,s.a.createElement(E.a,{src:this.state.imgPath}),s.a.createElement("figcaption",null,this.state.messages," unread messages"))),s.a.createElement(f.a.Item,{onClick:function(){e.props.application.setState({signedIn:!1,user:null,accountid:null,account:!1,onMessagePage:!1})}},"Sign Out"))}}]),t}(s.a.Component),$=function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,null,[{key:"getDataFromServer",value:function(){var e=Object(g.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Array,e.next=3,fetch(t);case 3:return e.next=5,e.sent.json();case 5:return e.sent.forEach((function(e){a.push(new Q(e.itemID,e.description,e.name,e.userID,e.replaceFee,e.dailyRate,e.tags,e.img,e.bookedDates))})),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();$.postDataToServer=function(e){return fetch("http://localhost:7000/items",{method:"POST",body:e})},$.deleteDataFromServer=function(e){return fetch("http://localhost:7000/items/".concat(e),{method:"DELETE"})},$.updateDataOnServer=function(e,t){return fetch("http://localhost:7000/items/".concat(e),{method:"PUT",body:t})};var z=function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,null,[{key:"getDataFromServer",value:function(){var e=Object(g.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Array,e.next=3,fetch("http://localhost:7000/users/");case 3:return e.next=5,e.sent.json();case 5:return e.sent.forEach((function(e){a.push(e.userID)})),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(g.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:7000/users/".concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n.password);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(g.a)(d.a.mark((function e(t,a){var n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("login",t),n.append("password",a),e.next=5,fetch("http://localhost:7000/users/login",{method:"POST",body:n});case 5:return s=e.sent,console.log(s),e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}();z.postDataToServer=function(e){return fetch("http://localhost:7000/users",{method:"POST",body:e})},z.deleteDataFromServer=function(e){return fetch("http://localhost:7000/users/".concat(e),{method:"DELETE"})},z.updateDataOnServer=function(e,t){return fetch("http://localhost:7000/users/".concat(e),{method:"PUT",body:t})};var H=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).userName="",a.password="",a.state={users:[],signedUp:null,loginFailed:null},a.res=null,a.userPassword="",a.request=null,a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"getDataFromServer",value:function(){var e=Object(g.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,z.getDataFromServer();case 3:e.t1=e.sent,e.t2={users:e.t1},e.t0.setState.call(e.t0,e.t2),this.request=window.setTimeout((function(){t.getDataFromServer()}),200);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){clearTimeout(this.request)}},{key:"componentDidMount",value:function(){this.getDataFromServer()}},{key:"getUser",value:function(){var e=Object(g.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.getUser(t);case 2:this.userPassword=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loginUser",value:function(){var e=Object(g.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.login(t,a);case 2:this.res=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleLogin",value:function(){var e=this;""===this.password||""===this.userName||this.loginUser(this.userName,this.password).then((function(){200==e.res.status?(console.log("Logging in."),e.props.application.setState({signedIn:!0,user:e.userName}),e.setState({signedUp:null}),e.setState({loginFailed:null})):(console.log("Invalid username or password."),e.setState({loginFailed:!0}),e.setState({signedUp:null}))}))}},{key:"handleSignUp",value:function(){var e=this;""===this.password||""===this.userName||(this.userName.endsWith("@jhu.edu")||this.userName.endsWith("@jh.edu")?this.getUser(this.userName).then((function(){if(""===e.userPassword){console.log("Creating new user.");var t=new FormData;t.append("userID",e.userName),t.append("password",e.password),z.postDataToServer(t),e.setState({signedUp:!0,loginFailed:null})}else console.log("Tried to create new user. Email already in use."),e.setState({signedUp:!1,loginFailed:null}),console.log(e.state)})):this.setState({signedUp:!1,loginFailed:null}))}},{key:"render",value:function(){var e=this;return s.a.createElement(w.a,{centered:!0,colums:5},s.a.createElement(w.a.Row,{centered:!0,columns:2},s.a.createElement(w.a.Column,null,s.a.createElement(v.a,{textAlign:"left"},s.a.createElement(O.a,{success:null!=this.state.signedUp&&this.state.signedUp,warning:null!=this.state.signedUp&&!this.state.signedUp,error:null!=this.state.loginFailed&&this.state.loginFailed},s.a.createElement(j.a,null,"Email:"),s.a.createElement(O.a.Input,{required:!0,type:"text",name:"username",id:"username",onChange:function(){e.userName=document.getElementById("username").value}}),s.a.createElement(j.a,null,"Password:"),s.a.createElement(O.a.Input,{required:!0,type:"password",name:"password",id:"password",onChange:function(){e.password=document.getElementById("password").value}}),s.a.createElement("hr",null),s.a.createElement(k.a,{success:!0,header:"Sign Up Complete.",content:"You're all signed up."}),s.a.createElement(k.a,{warning:!0,header:"Sign Up Failed.",content:"You entered a non-jhu email, or an email already in use."}),s.a.createElement(k.a,{error:!0,header:"Sign In Failed.",content:"Invalid email or password."}),s.a.createElement(b.a,{onClick:function(){e.handleLogin()}},"Login"),s.a.createElement(b.a,{onClick:function(){e.handleSignUp()}},"Sign up"))))))}}]),t}(s.a.Component),W=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={plusShown:!0,pictures:[]},a.uploadFile=a.uploadFile.bind(Object(h.a)(a)),a.username=a.props.application.state.user,a.description="",a.itemName="",a.replaceFee=0,a.dailyRate=0,a.tag="",a.tags=[],a.formData=new FormData,a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"handleSubmit",value:function(){this.setState({plusShown:!0}),this.props.application.setState({signedIn:!0,user:this.username}),this.tags.push(this.tag),this.formData.append("identifier",-1),this.formData.append("description",this.description),this.formData.append("name",this.itemName),this.formData.append("username",this.username),this.formData.append("replaceFee",this.replaceFee),this.formData.append("dailyRate",this.dailyRate),this.formData.append("tags",this.tags),$.postDataToServer(this.formData),this.props.closeModal()}},{key:"handleFormChange",value:function(){this.setState({plusShown:!1}),this.props.application.setState({signedIn:!0,user:this.username})}},{key:"handleCancel",value:function(){this.setState({plusShown:!0}),this.props.application.setState({signedIn:!0,user:this.username})}},{key:"uploadFile",value:function(e){var t=e.target.files[0];console.log(t),t&&this.formData.append("image",t)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(v.a,{style:{marginTop:"2%",marginBottom:"2%"},text:!0},s.a.createElement(j.a,{as:"h2"},"Adding an Item"),s.a.createElement(O.a,null,s.a.createElement(O.a.Field,null,s.a.createElement("label",null,"Title"),s.a.createElement("input",{type:"text",name:"name",id:"itemNameField",onChange:function(){e.itemName=document.getElementById("itemNameField").value}})),s.a.createElement(O.a.Field,null,s.a.createElement("label",null,"Description"),s.a.createElement("input",{type:"text",name:"description",id:"descField",onChange:function(){e.description=document.getElementById("descField").value}})),s.a.createElement(O.a.Field,null,s.a.createElement("label",null,"Daily Rate"),s.a.createElement("input",{type:"number",step:"0.01",name:"dailyRate",id:"dailyRateField",onChange:function(){e.dailyRate=document.getElementById("dailyRateField").value}})),s.a.createElement(O.a.Field,null,s.a.createElement("label",null,"Replacement Fee"),s.a.createElement("input",{type:"number",step:"0.01",name:"replaceFee",id:"replacementField",onChange:function(){e.replaceFee=document.getElementById("replacementField").value}})),s.a.createElement(O.a.Field,null,s.a.createElement("label",null,"Tags"),s.a.createElement("input",{type:"text",name:"tag",id:"tagField",onChange:function(){e.tag=document.getElementById("tagField").value}})),s.a.createElement(O.a.Field,null,s.a.createElement("label",null,"Images"),s.a.createElement("input",{type:"file",accept:"image/jpeg, image/png",name:"image",id:"imageField",onChange:this.uploadFile})),s.a.createElement(b.a,{onClick:function(){e.handleSubmit()}},"Submit"),s.a.createElement(b.a,{onClick:function(){e.props.navbar.setState({modalOpen:!1})}},"Cancel"))))}}]),t}(s.a.Component),J=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={items:[]},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"filterBySearchQuery",value:function(e,t,a){var n=[],s=Number.MAX_VALUE;return""!=a&&1!=isNaN(parseFloat(a))&&(s=parseFloat(a)),e.forEach((function(e){if(e.dailyRate<=s)if(e.name.toLowerCase().includes(t.toLowerCase())||t.toLowerCase().includes(e.name.toLowerCase()))n.push(e);else if(e.description.toLowerCase().includes(t.toLowerCase())||t.toLowerCase().includes(e.description.toLowerCase()))n.push(e);else if(e.userID.toLowerCase().includes(t.toLowerCase())||t.toLowerCase().includes(e.userID.toLowerCase()))n.push(e);else{var a=!1;e.tags.forEach((function(e){console.log(e,t),(e.toLowerCase().includes(t.toLowerCase())||t.toLowerCase().includes(e.toLowerCase()))&&(console.log("YUP"),a=!0)})),a&&n.push(e)}})),n}},{key:"getDataFromServer",value:function(){var e=Object(g.a)(d.a.mark((function e(){var t,a,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null==this.props.user?"http://localhost:7000/items":"http://localhost:7000/items/user/"+this.props.user,e.next=3,$.getDataFromServer(t);case 3:a=e.sent,a=this.filterBySearchQuery(a,this.props.searchQuery,this.props.maxPrice),this.setState({items:a}),window.setTimeout((function(){n.getDataFromServer(t)}),200);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getDataFromServer()}},{key:"render",value:function(){var e=this;return s.a.createElement(v.a,{style:{marginTop:"10px"}},s.a.createElement(w.a,{columns:4},this.state.items.map((function(t){return s.a.createElement(X,{key:t.itemID,item:t,application:e.props.application})})))," ")}}]),t}(s.a.Component),X=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(w.a.Column,{stretched:!0},s.a.createElement(P,{item:this.props.item,application:this.props.application}))}}]),t}(s.a.Component),K=a(920),G=a(908),V=a(912),_=a(436),Z=(Object(x.b)(M.a),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={},a.handleRate=function(e,t){var n=t.rating,s=t.maxRating;return a.setState({rating:n,maxRating:s})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(y.a,{trigger:s.a.createElement(K.a,{icon:"star",onRate:this.handleRate,defaultRating:0,maxRating:5,size:"massive"})},s.a.createElement(y.a.Content,null,s.a.createElement(ie,{rating:this.state.rating,userID:this.props.userID,seller:this.props.seller}))))}}]),t}(s.a.Component)),ee=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).uploadFile=a.uploadFile.bind(Object(h.a)(a)),a.formData=new FormData,a.state={profile:"",payPal:!1},a.amt=0,a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"handlePayment",value:function(e,t){var a=this;fetch("/paypal-transaction-complete",{method:"post",body:JSON.stringify({orderID:e.orderID,details:t})}).then((function(){a.addFunds(),a.setState({payPal:!1})}))}},{key:"handleSubmit",value:function(){this.updateDataOnServer(this.props.user,this.formData)}},{key:"updateDataOnServer",value:function(e,t){return fetch("http://localhost:7000/users/".concat(e),{method:"PUT",body:t})}},{key:"uploadFile",value:function(e){var t=e.target.files[0];t&&this.formData.append("image",t)}},{key:"addFunds",value:function(){console.log("funds to be added"),this.setState({payPal:!0});var e=this.props.application.state.user,t=new FormData;t.append("amount",this.amt),fetch("http://localhost:7000/users/"+e,{method:"PUT",body:t}),alert("funds added"),document.getElementById("payAmt").value=0}},{key:"componentDidMount",value:function(){this.getUserImage(this.props.user)}},{key:"getUserImage",value:function(){var e=Object(g.a)(d.a.mark((function e(t){var a,n,s=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:7000/users/".concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,this.setState({profile:n.img}),window.setTimeout((function(){s.getUserImage(t)}),200);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return s.a.createElement(v.a,null,s.a.createElement(G.a,null),s.a.createElement(w.a,{centered:!0,columns:2,divided:!0},s.a.createElement(w.a.Row,null,s.a.createElement(w.a.Column,null,s.a.createElement(j.a,{as:"h1"},this.props.application.state.accountid," "),s.a.createElement(E.a,{src:"data:image/jpeg;base64,".concat(this.state.profile),size:"medium",circular:!0}),s.a.createElement(O.a.Field,null,s.a.createElement(b.a,{as:"label",htmlFor:"file",type:"button"}," + "),s.a.createElement("input",{type:"file",accept:"image/jpeg, image/png",name:"image",id:"file",style:{display:"hidden"},onChange:this.uploadFile}),s.a.createElement("input",{style:this.state.payPal?{display:"none"}:{},id:"payAmt",placeholder:"$0.00",type:"number",onChange:function(){e.amt=document.getElementById("payAmt").value}}),s.a.createElement("button",{style:this.state.payPal?{display:"none"}:{},onClick:function(){e.setState({payPal:0!==e.amt})}},"ADD FUNDS"),s.a.createElement("div",{style:this.state.payPal?{}:{display:"none"}},s.a.createElement("h1",null,"Adding ",this.amt," funds to your account"),s.a.createElement(_.PayPalButton,{amount:this.amt,onSuccess:function(t,a){e.handlePayment(a,t)},options:{clientId:"ATgUSG3PV1TgX6iuxa6TEb9lal8bzT2QRjX-vHKNN2fKn5oQGXTqmsxPbAn-m9N3QAR9RvymheFYRJvd"}})))))),s.a.createElement(G.a,null))}}]),t}(s.a.Component),te=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={profile:"",balance:0},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getUserImage(this.props.user),this.getUserBalance(this.props.application.state.user)}},{key:"updateBalance",value:function(e,t){var a=new FormData;a.append("amount",t),fetch("http://localhost:7000/users/"+e,{method:"PUT",body:a})}},{key:"payUser",value:function(){var e=this.props.application.state.user,t=this.props.application.state.accountid,a=document.getElementById("payAmt"),n=a.value;a.value=0,this.state.balance<n?alert("Your Balance is too low!"):(this.updateBalance(e,-1*n),this.updateBalance(t,n),alert("Paid"))}},{key:"getUserImage",value:function(){var e=Object(g.a)(d.a.mark((function e(t){var a,n,s=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:7000/users/".concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,this.setState({profile:n.img}),window.setTimeout((function(){s.getUserImage(t)}),200);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserBalance",value:function(){var e=Object(g.a)(d.a.mark((function e(t){var a,n,s=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:7000/users/".concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,this.setState({balance:n.balance}),window.setTimeout((function(){s.getUserBalance(t)}),200);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(E.a,{src:"data:image/jpeg;base64,".concat(this.state.profile),wrapped:!0,ui:!1,height:100,width:100}),s.a.createElement("h1",null,this.props.application.state.accountid," "),s.a.createElement("input",{id:"payAmt",placeholder:"$0.00",type:"number"}),s.a.createElement("button",{onClick:function(){e.payUser()}},"PAY ME"),s.a.createElement(w.a.Column,null,s.a.createElement(j.a,null," Renter Rating "),s.a.createElement(Z,{userID:this.props.user,seller:0}),s.a.createElement(y.a,{trigger:s.a.createElement(b.a,null,"Show Renter Reviews")},s.a.createElement(y.a.Content,null,s.a.createElement(re,{seller:0,userID:this.props.user}))),s.a.createElement(j.a,null," Rentee Rating "),s.a.createElement(Z,{userID:this.props.user,seller:1}),s.a.createElement(y.a,{trigger:s.a.createElement(b.a,null,"Show Rentee Reviews")},s.a.createElement(y.a.Content,null,s.a.createElement(re,{seller:1,userID:this.props.user})))))}}]),t}(s.a.Component),ae=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(S.a,null,s.a.createElement(S.a.Content,null,s.a.createElement(K.a,{icon:"star",defaultRating:this.props.rating,maxRating:5,size:"large",disabled:!0})),s.a.createElement(S.a.Content,{description:"".concat(this.props.review)}))}}]),t}(s.a.Component),ne=function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,null,[{key:"getDataFromServer",value:function(){var e=Object(g.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Array,e.next=3,fetch(t);case 3:return e.next=5,e.sent.json();case 5:return e.sent.forEach((function(e){a.push(new se(e.rating,e.review,e.seller))})),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();ne.postDataToServer=function(e,t){var a={};e.forEach((function(e,t){a[t]=e}));JSON.stringify(a);return fetch("http://localhost:7000/users/".concat(t,"/feedback"),{method:"POST",body:e})};var se=function e(t,a,n,s){Object(o.a)(this,e),this.id=s,this.rating=t,this.review=a,this.seller=n},re=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={feedbacks:[],seller:a.props.seller},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"getDataFromServer",value:function(){var e=Object(g.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="http://localhost:7000/users/".concat(this.props.userID,"/feedback"),e.next=3,ne.getDataFromServer(t);case 3:a=e.sent,this.setState({feedbacks:a});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleBuyerSeller",value:function(){1==this.state.seller?this.setState({seller:0}):this.setState({seller:1}),this.getDataFromServer()}},{key:"componentDidMount",value:function(){this.getDataFromServer()}},{key:"render",value:function(){var e=this;return s.a.createElement(v.a,null,s.a.createElement(j.a,null,"Reviews"),s.a.createElement(V.a,null,this.state.feedbacks.filter((function(t){return t.seller==e.state.seller})).map((function(e){return s.a.createElement(ae,{key:e.id,rating:e.rating,review:e.review})}))))}}]),t}(s.a.Component),ie=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={showForm:!1,rating:a.props.rating,review:"",seller:a.props.seller},a.formData=new FormData,a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"handleSubmit",value:function(){var e=Object(g.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.formData.append("rating",this.state.rating),this.formData.append("review",this.review),this.formData.append("seller",this.state.seller),e.next=5,ne.postDataToServer(this.formData,t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return s.a.createElement(v.a,null,s.a.createElement(j.a,{as:"h2",icon:!0},s.a.createElement(I.a,{name:"settings"}),"Add a review!"),s.a.createElement(O.a,{onSubmit:function(){e.handleSubmit(e.props.userID)}},s.a.createElement(O.a.Field,{required:!0},s.a.createElement("label",null,"Review:"),s.a.createElement(D.a,{type:"textarea",id:"review",rows:"3",onChange:function(){e.review=document.getElementById("review").value}})),s.a.createElement(O.a.Button,{content:"Submit"})))}}]),t}(s.a.Component),oe=function e(t,a,n,s,r,i,l){Object(o.a)(this,e),this.chatID=t,this.messages=a,this.user1ID=n,this.user2ID=s,this.lastMessage=r,this.U1Seen=i,this.U2Seen=l},le=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={chats:[]},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"getDataFromServer",value:function(){var e=Object(g.a)(d.a.mark((function e(){var t,a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Array,e.next=3,fetch("http://localhost:7000/chat/user/"+this.props.user);case 3:return e.next=5,e.sent.json();case 5:e.sent.forEach((function(e){t.push(new oe(e.chatID,e.messages,e.user1,e.user2,e.lastMessageTime,e.lastU1seen,e.lastU2seen))})),this.setState({chats:t}),window.setTimeout((function(){a.getDataFromServer()}),200);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getDataFromServer()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("h2",{style:{marginTop:"10px"}},"Messages"),this.state.chats.map((function(t){return s.a.createElement(ce,{chat:t,user:e.props.user})})))}}]),t}(s.a.Component),ce=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={messageOpen:!1},a.seen=!1,a.otherUser=a.props.chat.user1ID,a.props.chat.user1ID===a.props.user&&(a.otherUser=a.props.chat.user2ID),a.displayMessage=a.props.chat.messages.substring(a.props.chat.messages.lastIndexOf(":")+1),a.seen=!0,a.props.user===a.props.chat.user1ID&&a.props.chat.U1Seen<a.props.chat.lastMessage?a.seen=!1:a.props.user===a.props.chat.user2ID&&a.props.chat.U2Seen<a.props.chat.lastMessage&&(a.seen=!1),a.lastMessageTime=new Date(parseInt(a.props.chat.lastMessage)),a.hours=a.lastMessageTime.getHours()%12==0?12:a.lastMessageTime.getHours()%12,a.minutes=a.lastMessageTime.getMinutes(),a.pmam=a.lastMessageTime.getHours()>11?"AM":"PM",a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{style:{cursor:"pointer",marginTop:"10px",fontWeight:this.seen?"normal":"bold"}},s.a.createElement(y.a,{open:this.state.messageOpen,trigger:s.a.createElement(F.a,{onClick:function(){e.setState({messageOpen:!0})}},s.a.createElement("div",null,s.a.createElement("p",null,this.otherUser)),s.a.createElement("div",null,s.a.createElement("p",null,this.hours,":",this.minutes," ",this.pmam),s.a.createElement("p",null,this.displayMessage)))},s.a.createElement(v.a,null,s.a.createElement(N,{closeModal:function(){e.setState({messageOpen:!1}),e.seen=!0},application:this.props.application,user2:this.otherUser,user1:this.props.user}))))}}]),t}(s.a.Component),ue=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={signedIn:!1,user:null,searchQuery:"",account:!1,accountid:null,maxPrice:"",onMessagePage:!1},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.state.signedIn?this.state.account&&this.state.accountid===this.state.user?s.a.createElement(v.a,{style:{paddingTop:"5px"}},s.a.createElement(Y,{application:this,user:this.state.user}),s.a.createElement(ee,{application:this,user:this.state.accountid}),s.a.createElement(J,{searchQuery:this.state.searchQuery,maxPrice:this.state.maxPrice,application:this,user:this.state.accountid})):this.state.account&&this.state.accountid!==this.state.user?s.a.createElement(v.a,{style:{paddingTop:"5px"}},s.a.createElement(Y,{application:this,user:this.state.user}),s.a.createElement(te,{application:this,user:this.state.accountid}),s.a.createElement(J,{searchQuery:this.state.searchQuery,maxPrice:this.state.maxPrice,application:this,user:this.state.accountid})):this.state.onMessagePage?s.a.createElement(v.a,{style:{paddingTop:"5px"}},s.a.createElement(Y,{application:this,user:this.state.user}),s.a.createElement(le,{user:this.state.user})):s.a.createElement(v.a,{style:{paddingTop:"5px"}},s.a.createElement(Y,{application:this,user:this.state.user}),s.a.createElement(J,{searchQuery:this.state.searchQuery,maxPrice:this.state.maxPrice,application:this,user:null})):s.a.createElement("div",{style:{paddingTop:"5px"}},s.a.createElement(pe,null),s.a.createElement(H,{application:this}))}}]),t}(s.a.Component),pe=function(){return s.a.createElement("header",null,s.a.createElement(v.a,{textAlign:"center"},s.a.createElement("h1",null,"Borrow"),s.a.createElement("h4",null,s.a.createElement("small",null,"Peer to peer, cloud based, clothing rental built with AI solutions.")),s.a.createElement("br",null)))},he=ue;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(he,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[447,1,2]]]);
//# sourceMappingURL=main.6aeded7c.chunk.js.map